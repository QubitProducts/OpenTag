try{(function(){var A,w;(function(){Function.prototype.bind=Function.prototype.bind||function(a){var d=this;return function(){return d.apply(a,arguments)}}})();var r=function(){};(function(){function a(){}var d=null;try{d=(0,eval)("this")||function(){return this}()}catch(b){}a.global=function(){return d};a.namespace=function(b,c,g,k){b=b.split(".");var h=a.NAMESPACE_BASE||a.global(),n=null,f=null,h=g||h;for(g=0;g<b.length-1;g+=1)f=b[g],h[f]=h[f]||{},h=h[f];n=h;f=b[b.length-1];d.TAGSDK_NS_OVERRIDE&&
(k=!1);void 0!==c?void 0!==n[f]&&k||(n[f]=c):n[f]=n[f]||{};return n[f]};a.clazz=function(b,c,g,d,h){a.namespace(b,c,d,!0);"function"===typeof g&&(c.superclass=g,c.prototype=new c.superclass(h));c.prototype&&(b=b.split("."),c.prototype.CLASS_NAME=b[b.length-1],b.splice(b.length-1,1),c.prototype.PACKAGE_NAME=b.join("."));return c};a.clazz("qubit.Define",a)})();(function(){function a(a){}for(var d={},b=0;93>b;b++)d["abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-#$&+()@'%./:<>?[\"]^_`{|}~\\;=".charAt(b)]=
b;qubit.Define.clazz("qubit.Cookie",a);a.cookieAlphabet="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-#$&+()@'%./:<>?[\"]^_`{|}~\\;=";a.cookieAlphabetMap=d;a.decode=function(a){return decodeURIComponent(a)};a.encode=function(a){return encodeURIComponent(a)};a.set=function(b,c,g,d,h){if(g){var n=new Date;n.setTime(n.getTime()+864E5*g);g="; expires="+n.toGMTString()}else g="";h&&(b=a.encode(b),c=a.encode(c));b=b+"="+c+g+"; path=/;";d&&(b+=" domain="+d);document.cookie=b};a.get=function(b,
c){for(var g=b+"=",d=document.cookie.split(";"),h=0;h<d.length;h++){for(var n=d[h];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(g))return g=n.substring(g.length,n.length),c&&(g=a.decode(g)),g}return null};a.getAll=function(b,c){for(var g=b+"=",d=document.cookie.split(";"),h=[],n=0;n<d.length;n++){for(var f=d[n];" "===f.charAt(0);)f=f.substring(1,f.length);0===f.indexOf(g)&&(f=f.substring(g.length,f.length),c&&(f=a.decode(f)),h.push(f))}return h};a.rm=function(b,c){a.set(b,"",-1,c)}})();
(function(){function a(a){if(a)if(a.alphabet)for(this.alphabet=a.alphabet,this.dict={},a=0;a<this.alphabet.length;a++)this.dict[this.alphabet[a]]=a;else this.alphabet=b,this.dict=g}function d(a,b){for(var c in b)if(a===b[c])return c;return null}for(var b=[],e=Math.pow(2,8),c=0;c<e;c++)b.push(String.fromCharCode(c));for(var g={},e=0;e<b.length;e++)g[b[e]]=e;qubit.Define.clazz("qubit.compression.LZW",a);a.prototype.encode=function(a){for(var b=this.alphabet.length,c={},f=[],e=0,q=a.charAt(e++),m,s=
this.dict;m=a.charAt(e++);){var d=q+m;if(s.hasOwnProperty(d)||c.hasOwnProperty(d))q=d;else{var g=s.hasOwnProperty(q)?s[q]:c[q];if(void 0===g)throw"Dictionary base is to small for those contents: "+q;f.push(g);c[d]=b++;q=m}}""!==q&&f.push(c.hasOwnProperty(q)?c[q]:s[q]);return f};a.prototype.decode=function(a){for(var b=this.dict,c=this.alphabet.length,f,e={},q=d(a[0],b),m=q,s=[q],g=1;g<a.length;g++){var y=a[g];f=d(y,b);null===f&&(e.hasOwnProperty(y)&&(f=e[y]),null===f&&(f=m+q));s.push(f);q=f.charAt(0);
e[c++]=m+q;m=f}return s.join("")}})();(function(){function a(a){}for(var d={},b=0;45>b;b++)d["abcdefghijklmnopqrstuvwxyz0123456789'%./:<>?[".charAt(b)]=b;for(var e={},b=0;45>b;b++)e['ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-#$&+()@"]^_`{|}~'.charAt(b)]=b;for(var c={},b=0;45>b;b++)c["abcdefghijklmnopqrstuvwxyz0123456789'%./:<>?[".charAt(b)]='ABCDEFGHIJKLMNOPQRSTUVWXYZ*!-#$&+()@"]^_`{|}~'.charAt(b);var g="abcdefghijklmnopqrstuvwxyz0123456789'%./:<>?[".split(""),k=g.length,h=new qubit.compression.LZW({});qubit.Define.clazz("qubit.compression.Compressor",
a);a.prototype.compress=function(a,b){for(var c=(b||h).encode(a),q=[],m=0;m<c.length;m++)q.push(String.fromCharCode(c[m]));return q.join("")};a.prototype.compressAnsi=function(a,b){for(var e=(b||h).encode(a),q=[],m=0;m<e.length;m++){var s;s=e[m];var d=0,y=0>s;y&&(s=-s);var x="",t=!0;do d=s%k,t?(x=c[g[d]],t=!1):x=g[d]+x,s=(s-d)/k;while(0<s);s=y?"-"+x:x;q.push(s)}return q.join("")};a.prototype.decompressAnsi=function(a,b){for(var c=[],q="",m=0;m<a.length;m++){var s=a.charAt(m);if(e.hasOwnProperty(s)){for(var s=
q+s,q="",g=0,y=0,x=!0,t=0;t<s.length;t++){var D=s.charAt(s.length-1-t);x&&(x=!1,D="abcdefghijklmnopqrstuvwxyz0123456789'%./:<>?[".charAt(e[D]));g+=d[D]*Math.pow(k,y++)}s=g;c.push(s)}else q+=s}return(b||h).decode(c)};a.prototype.decompress=function(a,b){for(var c=[],q=0;q<a.length;q++)c.push(a.charCodeAt(q));return(b||h).decode(c)}})();(function(){function a(){}function d(a,m){for(var b=k.length,f=0;f<b;f++)if(a===k[f][0])return k[f][1];k[k.length]=[a,m];return!1}function b(a,m,f,c,h){var e=!1,v=!1,
n=!1,H=!1,u=!1,u=!1;m&&(e=(u=!!m.all)||m.nodes,H=u||m.win,v=u,n=m.noFunctions&&!u,void 0!==m.noOwn&&(v=!!m.noOwn),void 0!==m.noFunctions&&(n=!!m.noFunctions),void 0!==m.win&&(H=!!m.win),void 0!==m.nodes&&(e=!!m.nodes),u=!!m.copyReference);if(void 0===f||f){void 0!==f&&f--;if(!(a&&a instanceof Object))return a;if(!e){try{if(a instanceof Node)return a}catch(p){if(a instanceof ActiveXObject&&void 0!==a.nodeType)return a}if(a===document)return a}if(!H&&a===g)return a;e=a instanceof Array?[]:{};a instanceof
Date&&(e=new Date(a));!n&&a instanceof Function&&(n=String(a).replace(/\s+/g,""),e=n.indexOf("{[nativecode]}")+14===n.length?function(){return a.apply(h||this,arguments)}:function(){return a.apply(this,arguments)});void 0===c&&(k=[],c=0);if(n=d(a,e))return n;if(e instanceof Array)for(n=0;n<a.length;n++)e[e.length]=a[n]===a[n]?b(a[n],m,f,c+1,a):a[n];else{var n=0,r;for(r in a){if(v||a.hasOwnProperty(r))e[r]=a[r]===a[r]?b(a[r],m,f,c+1,a):a[r];n++}}m.proto&&(e.prototype=b(a.prototype,m,f,c+1,a));u&&(e.___copy_ref=
a);return e}}function e(a,m,b,f,c,d,v){b=b||{};void 0===b.hasOwn&&(b.hasOwn=!0);if(!b.objectsOnly||a instanceof Object)if(void 0===b.maxDeep||b.maxDeep){void 0!==b.maxDeep&&b.maxDeep--;if(!b||!b.nodes)try{if(a instanceof Node)return}catch(n){if(a instanceof ActiveXObject&&void 0!==a.nodeType)return}if(a!==g){void 0===f&&(h=[],f=0);var k;a:{for(k=0;k<f&&k<h.length;k++)if(a===h[k]){k=!0;break a}k=!1}if(!(k||(h[f]=a,c=c||a,c&&d&&c[d]!==c[d]||m(a,c,d,v)))){d=0;k="";for(var u in a){if(!b.hasOwn||a.hasOwnProperty(u))try{var p=
a[u];b.track&&(k=v?v+"."+u:u);e(p,m,b,f+1,c,u,k)}catch(r){}d++}}}}}var c=qubit.Define,g=c.global();c.clazz("qubit.opentag.Utils",a);a.global=c.global;a.namespace=c.namespace;a.clazz=c.clazz;a.getObjectUsingPath=function(a,m){m=m||g;for(var b=a.split("."),f=0;f<b.length;f++)m&&b[f]&&(m=m[b[f]]);return m};a.variableExists=function(a){return void 0!==a&&null!==a&&""!==a};a.ANON_VARS=[];a.getAnonymousAcessor=function(b){var m=a.indexInArray(b,a.ANON_VARS);-1===m&&(m=a.addToArrayIfNotExist(a.ANON_VARS,
b));return"qubit.opentag.Utils.ANON_VARS["+m+"]"};a.replaceAll=function(a,m,b){return a.replace(new RegExp(m.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),b)};a.secureText=function(a){"string"!==typeof a&&(a+="");a=a.replace(/</g,"&lt;");return a=a.replace(/>/g,"&gt;")};a.getUrl=function(){return document.location.href};a.getQueryParam=function(b){var m,f,c,e;m=a.getUrl();if(0<m.indexOf("?"))for(e=m.substring(m.indexOf("?")+1).split("&"),m=0,f=e.length;m<f;m+=1)if(c=e[m],0<c.indexOf("=")&&(c=
c.split("="),2===c.length&&c[0]===b))return c[1];return null};a.getElementValue=function(a){return(a=document.getElementById(a))?a.textContent||a.innerText:null};var k=[];a.objectCopy=function(a,m){m=m||{};var f=b(a,m,m.maxDeep);k=[];return f};var h=[];a.traverse=function(a,m,b){e(a,m,b)};a.prepareQuotedString=function(a){return"string"===typeof a?'"'+a.replace(/\"/g,'\\"')+'"':a};a.expressionToFunction=function(b,m){return a.gevalAndReturn("function ("+(m||"")+") {"+b+"}").result};a.defineClass=
function(b,m,f){var c=b.split("."),c=a.gevalAndReturn("(function "+c[c.length-1]+"() {  if ("+b+"._CONSTRUCTOR) {    return "+b+"._CONSTRUCTOR.apply(this, arguments);  } else {    if ("+b+".superclass) {      return "+b+".superclass.apply(this, arguments);    }  }})").result;c._CONSTRUCTOR=f.CONSTRUCTOR;c.superclass=m;a.clazz(b,c,m);for(var e in f)f.hasOwnProperty(e)&&"CONSTRUCTOR"!==e&&(c.prototype[e]=f[e]);return c};a.keys=function(a){if(a instanceof Object){if(Object.keys)return Object.keys(a);
var m=[],b;for(b in a)a.hasOwnProperty(b)&&(m[m.length]=b);return m}throw"keys() called on non-object!";};a.getSrcElement=function(a){var m;a=a||window.event;a.srcElement?m=a.srcElement:a.target&&(m=a.target);return m};a.addToArrayIfNotExist=function(a,m){for(var b=0,f=!1;b<a.length;b+=1)if(a[b]===m){f=!0;break}f||(a[a.length]=m,b=-1);return b};a.indexInArray=function(a,b){for(var f=0,c=!1;f<a.length;f++)if(a[f]===b){c=!0;break}return c?f:-1};a.removeFromArray=function(a,b){for(var f=0;f<a.length;f+=
1)a[f]===b&&a.splice(f,1)};a.addClass=function(b,m){var f;try{b.classList.add(m)}catch(c){null===b.className?b.className=m:(f=b.className.split(" "),a.addToArrayIfNotExist(f,m),b.className=f.join(" "))}};a.removeClass=function(b,m){var f;try{b.classList.remove(m)}catch(c){null===b.className?b.className="":(f=b.className.split(" "),a.removeFromArray(f,m),b.className=f.join(" "))}};a.gevalAndReturn=function(b){a.gevalAndReturn.___var_test___=void 0;a.gevalAndReturn.___var_test___error=void 0;a.geval("try{qubit.opentag.Utils.gevalAndReturn.___var_test___=("+
b+");}catch(ex){qubit.opentag.Utils.gevalAndReturn.___var_test___error = ex;}");return{result:a.gevalAndReturn.___var_test___,error:a.gevalAndReturn.___var_test___error}};a.trim=function(a){try{return String(a).trim()}catch(b){return String(a).replace(/^\s+|\s+$/g,"")}};a.setIfUnset=function(a,b){if(a&&b)for(var f in b)b.hasOwnProperty(f)&&!a.hasOwnProperty(f)&&(a[f]=b[f])};a.geval=function(a){window&&window.execScript?window.execScript(a):g.eval.call(g,a)};var n=[],f=!1;a.bodyReady=function(a){if(f)return a&&
a(),!0;if(f=!(!document.body||"complete"!==document.readyState)){for(var b=0;b<n.length;b++)try{n[b]()}catch(c){}a&&a()}else a&&n.push(a);return f};var v=g.onload;g.onload=function(b){a.bodyReady();v&&v(b)}})();(function(){function a(a){a&&(this._rate=a.rate||10,this._smallestRate=-1,a.start&&this.startPooling(),this.config=a);this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}qubit.opentag.Utils.clazz("qubit.opentag.Timer",a);a.prototype.timers=[];a.prototype.startPooling=
function(a){a&&this.config.dynamic&&(0>this._smallestRate||this._smallestRate>a)&&(this._smallestRate=Math.min(Math.floor(a/2),1500));this.started||(this.started=!0,setTimeout(this._binded_pool,0))};a.prototype._pool=function(){this.maxFrequent(function(){},5E3,this._lck_obj);this.callTimers();0!==this.timers.length?setTimeout(this._binded_pool,this._smallestRate>this._rate?this._smallestRate:this._rate):(this.started=!1,this._smallestRate=-1)};a.prototype.callTimers=function(){this.lastCalled=(new Date).valueOf();
for(var a=0;a<this.timers.length;a++){var e=this.timers[a];if((new Date).valueOf()>=e.time){try{e.execute()}catch(c){}this.timers.splice(a,1);--a}}};a.prototype.cancellAll=function(){this.timers=[]};a.prototype.setRate=function(a){this._rate=a};a.prototype.maxFrequent=function(a,e,c){c||(a.__maxFrequent__timer_opentag_qubit_=a.__maxFrequent__timer_opentag_qubit_||{},c=a.__maxFrequent__timer_opentag_qubit_);var d=c.____last__timed__max__frequent____;if(!d||(new Date).valueOf()-d>e)d=(new Date).valueOf(),
c.____last__timed__max__frequent____=d,a()};a.prototype.runIfNotScheduled=function(a,e,c){if(c.__lastRun__&&(new Date).valueOf()<e+c.__lastRun__)return this.schedule(a,e,c);c.__lastRun__=(new Date).valueOf();a();return!0};a.prototype.schedule=function(a,e,c){if(c.___scheduled___)return!1;c.___scheduled___=(new Date).valueOf();this.setTimeout(function(){c.___scheduled___=!1;c.__lastRun__=(new Date).valueOf();a()},e);return!0};var d=1;a.prototype.setTimeout=function(a,e){var c={id:d++,time:(new Date).valueOf()+
+e,execute:a};this.timers.push(c);this.startPooling(e);return c};a.prototype.setInterval=function(a,e){var c=setInterval(a,e);this.inervals.push(c);return c}})();(function(){qubit.opentag.Utils.namespace("qubit.opentag.Timed",new qubit.opentag.Timer({rate:37,dynamic:!0}));var a=qubit.opentag.Timed;a.tillTrue=function(d,b,e){var c=function(){d()?b():a.setTimeout(c,e||33)};c()}})();var p;p=p||{};p.fileLoader={};p.fileLoader.load=function(a,d,b,e,c,g){var k,h,n,f;f=!1;n=function(c){return function(){f||
(f=!0,c&&!h&&(h={url:document.location.href}),b(a,h,c))}};try{d&&(k=d(a))}catch(v){k=!1,b(a,"Exception loading pre",!0)}finally{!1!==k&&(d=p.fileLoader.createScriptEl(a,c,!1,g),b&&(d.onload=n(!1),d.onerror=n(!0),d.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||setTimeout(function(){n(!1)()},1)}),e||(e=window.document.getElementsByTagName("head")[0]),e.appendChild(d))}};p.fileLoader.createScriptEl=function(a,d,b,e){var c,g=document.createElement("script");g.type=
"text/javascript";g.src=p.fileLoader.tidyUrl(a)+(b?"?"+(new Date).getTime():"");!1!==d?(g.async="true",g.defer="true"):(g.async="false",!1!==g.async&&(g.async=!1),g.defer="false");for(c in e)e.hasOwnProperty(c)&&g.setAttribute(c,e[c]);return g};p.fileLoader.tidyUrl=function(a){return"http:"===a.substring(0,5)||"https:"===a.substring(0,6)?a:"//"+a};(function(){function a(a){this.config={order:0,include:!0,name:"Filter-"+d++,script:void 0,session:void 0};this.session=null;if(a){for(var e in a)a.hasOwnProperty(e)&&
(this.config[e]=a[e]);a.session&&this.setSession(a.session)}}var d=0;qubit.opentag.Utils.clazz("qubit.opentag.filter.BaseFilter",a);a.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};a.prototype.reset=function(){this.enable()};a.prototype.disable=function(){this.config.disabled=!0};a.prototype.enable=function(){this.config.disabled=!1};a.prototype.match=function(){return!0};a.prototype.setSession=function(a){this.session=a};a.prototype.getSession=function(){return this.session};a.prototype.getState=
function(){var b=a.state.PASS;if(this.config.disabled)return a.state.DISABLED;this.config.script&&(b=this.config.script.call(this,b));isNaN(+b)&&(b=a.state.FAIL);this.lastState=+b;return b}})();(function(){function a(b){var e={customStarter:function(a,b,c){b(!1)},customScript:function(a){return!0}};if(b)for(var c in b)!b.hasOwnProperty(c)||"customStarter"===c&&!b[c]||"customScript"===c&&!b[c]||(e[c]=b[c]);a.superclass.call(this,e)}var d=qubit.opentag.filter.BaseFilter;qubit.opentag.Utils.clazz("qubit.opentag.filter.SessionVariableFilter",
a,d);a.prototype.match=function(){try{return!!this.config.customScript(this.getSession())}catch(a){return!1}};a.prototype.runTag=function(a){!this._runTag&&this.config.customStarter&&(this._runTag=!0,this.config.customStarter(this.getSession(),function(e){this.lastRun=(new Date).valueOf();!0===e?a.run():a.runOnce()}.bind(this),a))};a.prototype.getState=function(b){b&&this.setSession(b);b=a.superclass.prototype.getState.call(this);if(b===d.state.DISABLED)return d.state.DISABLED;b===d.state.PASS&&this.config.customStarter&&
(b=d.state.SESSION);this.config.script&&(b=this.config.script.call(this,b,this.getSession()));return this.lastState=b};a.prototype.reset=function(){a.superclass.prototype.reset.call(this);this._runTag=void 0}})();p.GlobalEval={};p.GlobalEval.globalEval=function(a){window.execScript?window.execScript(a):window.eval.call(window,a)};p.HtmlInjector={};p.HtmlInjector.inject=function(a,d,b,e,c){var g,k,h,n;if(0<=b.toLowerCase().indexOf("<script")){c=document.createElement("div");c.innerHTML="a"+b;k=c.getElementsByTagName("script");
h=[];b=0;for(g=k.length;b<g;b+=1)h.push(k[b]);n=[];b=0;for(g=h.length;b<g;b+=1){k=h[b];var f={attributes:p.HtmlInjector.getAttributes(k)};k.src?f.src=k.src:f.script=k.innerHTML;n.push(f);k.parentNode.removeChild(k)}c.innerHTML&&0<c.innerHTML.length&&(c.innerHTML=c.innerHTML.substring(1));p.HtmlInjector.doInject(a,d,c);p.HtmlInjector.loadScripts(n,0,e,a)}else c=document.createElement("div"),c.innerHTML=b,p.HtmlInjector.doInject(a,d,c),e&&e()};p.HtmlInjector.doInject=function(a,d,b){if(0<b.childNodes.length){for(var e=
document.createDocumentFragment();0<b.childNodes.length;)e.appendChild(b.removeChild(b.childNodes[0]));d?p.HtmlInjector.injectAtStart(a,e):p.HtmlInjector.injectAtEnd(a,e)}};p.HtmlInjector.injectAtStart=function(a,d){0===a.childNodes.length?a.appendChild(d):a.insertBefore(d,a.childNodes[0])};p.HtmlInjector.injectAtEnd=function(a,d,b){b||(b=1);a===document.body&&"complete"!==document.readyState&&50>b?setTimeout(function(){p.HtmlInjector.injectAtEnd(a,d,b+1)},100):a.appendChild(d)};p.HtmlInjector.loadScripts=
function(a,d,b,e){var c,g,k=!1;for(c=a.length;d<c;d+=1)if(g=a[d],g.src){k=!0;break}else p.GlobalEval.globalEval(g.script);k&&p.fileLoader.load(g.src,null,function(){p.HtmlInjector.loadScripts(a,d+1,b,e)},e,!1,g.attributes);b&&d===c&&b()};p.HtmlInjector.getAttributes=function(a){var d,b,e,c,g={};if(a){b=a.attributes;d=b.length;for(a=0;a<d;a++)e=b[a].value,c=b[a].name.toLowerCase(),""===e||"id"!==c&&"class"!==c&&"charset"!==c&&"data-"!==c.substr(0,5)||(g[c]=e);return g}};(function(){var a=qubit.opentag.filter.BaseFilter,
d=p.HtmlInjector,b=p.fileLoader,e=qubit.opentag.filter.SessionVariableFilter,c=function(){};qubit.opentag.Utils.clazz("qubit.opentag.TagsUtils",c);var g=!1;c.bodyLoaded=function(){return g?!0:g=!(!document.body||"loading"===document.readyState)};var k={};c.loadScript=function(a){var f=a.url,e=function(b,c,e){k[f].error=c;e?(k[f].state="failure",a.onerror()):(k[f].state="success",a.onsuccess())};if(k[f]){if(a.noMultipleLoad)return e(f,k[f].error,"failure"===k[f].state);k[f].count+=1}else k[f]={count:1,
state:null};var h=!a.async,d=c.bodyLoaded();h&&!d?c.writeScriptURL(f,function(a,b){e(f,b,!a)}):b.load(f,!1,e,a.node,a.async)};var h=null;c.redirectDocumentWritesToArray=function(a,b){h=h||{write:document.write,writeln:document.writeln};document.write=function(b){a.push(b)};document.writeln=function(b){a.push(b)}};c.flushDocWritesArray=function(a,b,f,e,h){if(b&&a){a=a.splice(0,a.length);try{return c.injectHTML(b,f,a.join("\n"),h||r),!0}catch(d){}}else return!1;h&&h();return!0};c.unlockDocumentWrites=
function(){h&&(document.write=h.write,document.writeln=h.writeln,h=null)};var n=0;c.writeScriptURL=function(a,f){var e="_"+n++,h=c.prototype.PACKAGE_NAME+".TagsUtils.writeScriptURL.callbacks."+e;c.writeScriptURL.callbacks[e]=function(b){b?f(!1,"error while loading script "+a):f(!0);c.writeScriptURL.callbacks[e]=void 0;delete c.writeScriptURL.callbacks[e]};var d='if(this.readyState === "loaded" || this.readyState === "complete"){ try {'+h+"(true)} catch (ex) {}}",g="try{"+h+"(false)}catch(ex){}",h=
"try{"+h+"(true)}catch(ex){}";a=b.tidyUrl(a);document.write("<script onload='"+g+"'  onerror='"+h+"' onreadystatechange='"+d+"' type='text/javascript'  src='"+a+"'>\x3c/script>")};c.writeScriptURL.callbacks={};var f=a.state.SESSION,v=a.state.PASS,q=a.state.FAIL;c.filtersState=function(b,c,h){b=b.sort(function(a,b){try{return b.config.order-a.config.order}catch(f){return 0}});var d=v;if(!b||0===b.length)return d;for(var d=null,g=!1,n=!1,k=0,p,u,r,z,w=0;w<b.length;w++)if(r=b[w],r.setSession(c),r.match())if(p=
r.getState(),0<p){if(0===k||k>p)k=p}else p===a.state.DISABLED?g=!0:p===f?(n=!0,u=d=r):d=r;else z=r;b=!1;null===d?(b=!0,d=g?v:q):d=d.config.include?p:p===v?q:v;0<k&&(d===v||b)&&(d=k);if(d===f||d===v&&n){if(!u.config.include)return q;d=f;if(u instanceof e)try{u.runTag(h)}catch(A){}}h.config.dedupe&&d===v&&z&&z instanceof e&&(h.sendDedupePing=!0,d=q);return d};c.injectHTML=function(a,b,f,c){return d.inject(a,b?0:1,f,c||r)};c.getHTMLLocationForTag=function(a){a=a.prepareLocationObject(a.config.locationObject);
switch(a){case "HEAD":a=document.getElementsByTagName("head")[0];break;case "BODY":a=document.body;break;default:a=a?document.getElementById(a):document.body}return a}})();(function(){function a(e){this.config={};this.parameters=null;if(e){this.uniqueId="BV"+b++;a.ALL_VARIABLES[this.uniqueId]=this;for(var c in e)this.config[c]=e[c];void 0!==e.value&&(this.value=e.value);void 0!==e.defaultValue&&(this.defaultValue=e.defaultValue);return a.register(this)}}var d=qubit.opentag.Utils,b=0;d.clazz("qubit.opentag.pagevariable.BaseVariable",
a);a.ALL_VARIABLES={};a.pageVariables=[];a.register=function(b){if(b instanceof a){for(var c=0;c<a.pageVariables.length;c++){var d=a.pageVariables[c],k;if(k=b.constructor===d.constructor)a:{k=d.config;var h=b.config,n=void 0;for(n in h){var f=h[n],v;for(v in k)if(k.hasOwnProperty(v)&&k[v]!==f){k=!1;break a}}k=!0}if(k)return d}a.pageVariables.push(b);return b}return null};a.prototype.getValue=function(){return this.value};a.prototype.setValue=function(a){this.value=a};a.prototype.getDefaultValue=function(){return this.defaultValue};
a.prototype.setDefaultValue=function(a){this.defaultValue=a};a.prototype.exists=function(a){var b=d.variableExists(this.getValue());a&&(b=b||d.variableExists(this.getDefaultValue()));return b};a.prototype.getRelativeValue=function(a,b){var g=this.getValue();d.variableExists(g)||(g=b);a&&!d.variableExists(g)&&(g=this.getDefaultValue());return g};a.prototype.replaceToken=function(a,b,g,k){var h=this.exists();g=h?this.getValue():g;a="\\$\\{"+a+"\\}";return k||g instanceof Array?(k=h?this.getValueAccessorString():
d.getAnonymousAcessor(g),b.replace(new RegExp(a,"g"),k)):b.replace(new RegExp(a,"g"),g)};a.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};a.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"}})();(function(){function a(b){this._lockExprObject={};a.superclass.apply(this,arguments)}var d=qubit.opentag.Utils;d.clazz("qubit.opentag.pagevariable.Expression",a,qubit.opentag.pagevariable.BaseVariable);
a.prototype.getValue=function(){var b,e;try{if(-1===this.value.indexOf("[#]")){var c=d.gevalAndReturn(this.value);b=c.result;this.failMessage=null;e=c.error}else b=a.parseUVArray(this.value)}catch(g){e=g}e&&(b="could not read value of expression: \n"+this.value+"\nexact cause: "+e,this.failMessage!==b&&(this.failMessage=b),b=null);return b};a.parseUVArray=function(a){var e=a.split("[#]");a=d.gevalAndReturn(e[0]).result;var c=[],e=e[1];0===e.indexOf(".")&&(e=e.replace(".",""));for(var g=0;g<a.length;g++){var k=
d.getObjectUsingPath(e,a[g]);c.push(k)}return c};a.prototype.replaceToken=function(b,d,c,g){this.getValue()instanceof Array&&(g=!0);return a.superclass.prototype.replaceToken.call(this,b,d,c,g)}})();(function(){function a(b){a.superclass.apply(this,arguments)}var d=qubit.opentag.Utils;d.clazz("qubit.opentag.pagevariable.DOMText",a,qubit.opentag.pagevariable.BaseVariable);a.prototype.getValue=function(){return d.getElementValue(this.value)}})();(function(){function a(b){a.superclass.apply(this,arguments);
this._lockObject={}}var d=qubit.opentag.Timed;qubit.opentag.Utils.clazz("qubit.opentag.pagevariable.Cookie",a,qubit.opentag.pagevariable.BaseVariable);a.prototype.getValue=function(){var a=qubit.Cookie.get(this.value,!0);d.maxFrequent(function(){}.bind(this),2E3,this._lockObject);return a}})();(function(){function a(b){a.superclass.apply(this,arguments)}var d=qubit.opentag.Utils;d.clazz("qubit.opentag.pagevariable.URLQuery",a,qubit.opentag.pagevariable.BaseVariable);a.prototype.getValue=function(){return d.getQueryParam(this.value)}})();
(function(){function a(){}function d(a,b){var c=[];try{var m=a.parameters;if(m)for(var d=0;d<m.length;d++)m[d].variable===b&&c.push(m[d])}catch(h){}return c}var b=qubit.opentag.Utils,e=qubit.opentag.TagsUtils,c=qubit.opentag.pagevariable.BaseVariable,g=qubit.opentag.pagevariable.Expression,k=qubit.opentag.pagevariable.DOMText,h=qubit.opentag.pagevariable.Cookie,n=qubit.opentag.pagevariable.URLQuery;b.clazz("qubit.opentag.TagHelper",a);a.injectHTMLForLoader=function(a,b,c,m){var d=a.config;if(m=void 0!==
m?m:d.html){var d="END"===d.locationPlaceHolder,h=e.getHTMLLocationForTag(a);a.injectHTMLNotFinished=!0;try{h?e.injectHTML(h,d,m,function(){a.injectHTMLNotFinished=!1;if(b)try{b()}catch(m){}}.bind(a)):c&&"loading"===document.readyState?(document.write(m),a.injectHTMLNotFinished=!1):a.injectHTMLFailed=(new Date).valueOf()}catch(g){a.injectHTMLNotFinished=!1,a.injectHTMLFailed=(new Date).valueOf()}}};a.getAllVariablesWithParameters=function(a){for(var b=a.getPageVariables(),c=[],m=0;m<b.length;m++)for(var h=
b[m],e=d(a,h),g=0;g<e.length;g++)c.push({parameter:e[g],variable:h});return c};a.allParameterVariablesReadyForTag=function(a,c){for(var h=!0,m=a.getPageVariables(),e=0;e<m.length;e++){var g=m[e];try{var n=d(a,g),k=g.exists();!k&&c&&(0<n.length&&(k=b.variableExists(n[0].defaultValue)),k=k||g.exists(!0));if(!k){h=!1;break}}catch(t){h=!1;break}}return h};a.validateAndGetVariableForParameter=function(b){return b.hasOwnProperty("variable")&&b.variable?b.variable=a.initPageVariable(b.variable):b.uv?b.variable=
new g({name:b.uv,value:b.uv}):b.variable=a.initPageVariable({value:void 0,empty:!0})};a.initPageVariable=function(a){if(!a||a instanceof c)return a;switch(a.type){case "2":return new g(a);case "3":return new n(a);case "4":return new h(a);case "5":return new k(a);case "EPRESSION":return new g(a);case "URL_PARAMETER":return new n(a);case "COOKIE_VALUE":return new h(a);case "DOM_VALUE":return new k(a);default:return new c(a)}}})();(function(){function a(a){this.urlsFailed=this.urlsLoaded=0;this.config=
{name:"Tag-"+k++,async:!0,usesDocumentWrite:!1,timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForBody:!1,noMultipleLoad:!1,loadDependenciesOnLoad:!1};this.delayDocWrite=!1;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=this.genericDependencies||[];if(a){if(!a.name){var b="Tag-"+k++;this.config.name=b}this.addState("INITIAL");for(var f in a)this.config[f]=a[f];a.genericDependencies&&
(this.genericDependencies=this.genericDependencies.concat(a.genericDependencies));a.dependencies&&(this.dependencies=a.dependencies.concat(this.dependencies));a.PACKAGE&&(this._package=a.PACKAGE);this.onInit()}}function d(){this.cancelled?this._handleCancel():(this.waitForDependenciesFinished=(new Date).valueOf(),this.dependenciesLoaded()?this._markLoadedSuccesfuly():this._loadingOutOfTimeFrames()?(this.loadingTimedOut=(new Date).valueOf(),this.dependenciesLoaded(!0)?this._markLoadedSuccesfuly():
(this.addState("TIMED_OUT"),this.loadingDependenciesFailed=(new Date).valueOf(),this._triggerOnLoadTimeout())):(this.waitForDependenciesFinished=!1,this._setTimeout(d.bind(this),75)),this.waitForDependenciesFinished&&this.addState("LOADED_DEPENDENCIES"))}var b=qubit.opentag.Utils,e=qubit.opentag.TagsUtils,c=qubit.opentag.Timed,g=qubit.opentag.TagHelper,k=0;b.clazz("qubit.opentag.GenericLoader",a);a.prototype.onInit=r;a.prototype.LOADING_TIMEOUT=5E3;a.prototype._executeScript=function(){if(this.config&&
this.config.script)if("function"===typeof this.config.script)this.script=this.config.script;else{var a=this.replaceTokensWithValues(String(this.config.script));this.script=b.expressionToFunction(a).bind(this)}a=!1;try{this.script(),a=!0}catch(c){this.addState("EXECUTED_WITH_ERRORS"),this._onError(c)}finally{this.onExecute(a)}};a.prototype.getTimeout=function(){return this._getTimeout()};a.prototype._getTimeout=function(a){var c=+this.config.timeout;if(-1!==c&&0<this.dependencies.length){var f=0;a=
a||[];var d=this.dependencies;if(-1===b.indexInArray(a,this)){a[a.length]=this;for(var e=0;e<d.length;e++){var m=d[e]._getTimeout(a);m>f&&(f=m)}0<f&&(c+=f)}else return 0}return c};a.prototype.onExecute=r;a.prototype._flushDocWrites=function(a){var b=!0;this._docWriteNotFlushed=!1;try{var f=e.getHTMLLocationForTag(this);f&&this._securedWrites&&0<this._securedWrites.length&&((b=e.flushDocWritesArray(this._securedWrites,f,"END"===this.config.locationPlaceHolder,this.log,a))?this._docWriteFlushed=(new Date).valueOf():
this._docWriteNotFlushed=(new Date).valueOf())}catch(c){this._onError(c)}a&&a();this._securedWrites&&0<this._securedWrites.length&&(b=!1,this._docWriteNotFlushed=(new Date).valueOf());return b};a.prototype.log=r;a.prototype.finished=function(){return!!this.runIsFinished};a.prototype.script=function(){};a.prototype.before=function(){this.beforeRun=(new Date).valueOf();try{this.onBefore()}catch(a){this._onError(a)}};a.prototype.onBefore=r;a.prototype.after=function(a){this.afterRun=(new Date).valueOf();
try{this.onAfter(a)}catch(b){this._onError(b)}};a.prototype.onAfter=function(a){};a.prototype.runOnce=function(a){this._runOnceTriggered||this.scriptExecuted||(this._runOnceTriggered=(new Date).valueOf(),this.run(a))};a.CANCELL_ALL=!1;a.prototype.runCounter=0;a.prototype.run=function(b){if(this.cancelled||a.CANCELL_ALL)return this._handleCancel(),!1;if(this.isRunning)return!1;this.lastRun&&this.reset();this.lastRun=this.isRunning=(new Date).valueOf();this.runCounter++;this.load(b);b?this.execute():
this.waitForDependenciesAndExecute();return!0};a.prototype._setTimeout=function(a,b){this._wasTimed=(new Date).valueOf();return c.setTimeout(a,b)};a.prototype._handleCancel=function(){this.addState("CANCELLED");try{this.onCancel()}catch(a){this._onError(a)}};a.prototype.waitForDependenciesAndExecute=function(){this.cancelled?this._handleCancel():this.loadedDependencies?this.execute():this.loadingDependenciesFailed?(this._markFailure(),this._markFinished()):this._setTimeout(this.waitForDependenciesAndExecute.bind(this),
30)};a.prototype.execute=function(){this._triggerExecution()};a.prototype._triggerExecution=function(){if(this.cancelled)this._handleCancel();else if(!this.scriptExecuted){var a=!0;if(this.shouldWaitForDocWriteProtection())a=!1;else{if(!this._beforeEntered){this._beforeEntered=(new Date).valueOf();a=!1;try{a=this.before()}catch(b){this._onError(b)}if(a){this._markFailure();this._markFinished();return}}a=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(!this.scriptExecuted)if(this.unexpectedFail&&
(a=!0),a){this._flushDocWrites();this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail?this._markFailure():(this.scriptExecuted=(new Date).valueOf(),this.addState("EXECUTED"),this._executeScript());if(this.cancelled)return this._handleCancel(),!1;this.afterRun||(this.afterRun=(new Date).valueOf(),this.after(0<this.scriptExecuted));this._flushDocWrites();this._markFinished()}else this._setTimeout(this._triggerExecution.bind(this),30)}};a.prototype._markFailure=function(){this.scriptExecuted=
-(new Date).valueOf();this.addState("FAILED_TO_EXECUTE")};a.prototype._markFinished=function(){this.runIsFinished=(new Date).valueOf();this.isRunning=!1;a.LOCK_DOC_WRITE===this&&(this._flushDocWrites(),e.unlockDocumentWrites(),a.LOCK_DOC_WRITE=!1);this.onFinished(!0)};a.prototype.onFinished=r;a.prototype.onFinished=r;a.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite())if(!a.LOCK_DOC_WRITE)a.LOCK_DOC_WRITE=this,this._secureWriteAndCollectForExecution();else if(a.LOCK_DOC_WRITE!==
this)return this._lockedDocWriteInformed||(this._lockedDocWriteInformed=(new Date).valueOf()),!0;return!1};a.prototype.runWithoutDependencies=function(){this.run(!0)};a.prototype.loadExecutionURLsAndHTML=function(a){if(this.cancelled)return this._handleCancel(),!0;this._loadExecutionURLsAndHTMLInformed||(this._loadExecutionURLsAndHTMLInformed=!0);this._triggerURLsLoading(a);return this.loadURLsNotFinished||(this._flushDocWrites(),this._triggerHTMLInjection(),this._flushDocWrites(),this.injectHTMLNotFinished||
(this._flushDocWrites(),this._docWriteNotFlushed))?!1:!0};a.prototype._triggerURLsLoading=function(a){!this._urlLoadTriggered&&this.config.url&&(this._urlLoadTriggered=!0,this.loadURLs(!1,a))};a.prototype._triggerHTMLInjection=function(){!this._injectHTMLTriggered&&this.config.html&&(this._injectHTMLTriggered=!0,this.injectHTML())};a.prototype.STATE={INITIAL:0,STARTED:1,CANCELLED:2,LOADING_DEPENDENCIES:4,LOADED_DEPENDENCIES:8,LOADING_URL:16,LOADED_URL:32,EXECUTED:64,EXECUTED_WITH_ERRORS:128,FAILED_TO_LOAD_DEPENDENCIES:256,
FAILED_TO_LOAD_URL:512,FAILED_TO_EXECUTE:1024,TIMED_OUT:2048,UNEXPECTED_FAIL:4096};a.prototype.addState=function(a){if(this.STATE.hasOwnProperty(a)){this.state|=this.STATE[a];try{this.onStateChange(a)}catch(b){this._onError(b)}}};a.prototype.onStateChange=r;a.prototype.cancel=function(){this.cancelled=(new Date).valueOf()};a.prototype.state=a.prototype.STATE.INITIAL;a.prototype._markLoadedSuccesfuly=function(){this.loadedDependencies=(new Date).valueOf();this.onDependenciesLoaded()};a.prototype._secureWriteAndCollectForExecution=
function(){this._securedWrites||(this._securedWrites=[],e.redirectDocumentWritesToArray(this._securedWrites,this.log))};a.prototype.dependenciesLoaded=function(a,b){return 0===this.getDependenciesToBeLoaded(a,b).length};a.prototype.getDependenciesToBeLoaded=function(a,b){var f=b||[];this.injectionLocationReady()||f.push("html injection location");for(var c=0;c<this.dependencies.length;c++)if(this.dependencies[c]!==this){var d=this.dependencies[c].scriptExecuted;(!d||0>=+d)&&f.push("dependant Tag with name -> "+
(this.dependencies[c].config?this.dependencies[c].config.name:"anonymous"))}for(c=0;c<this.genericDependencies.length;c++)this.genericDependencies[c](this)||f.push("this.genericDependencies["+c+"] (index: "+c+")");return f};a.prototype.docWriteAsksToWaitForBody=function(){return!(!this.config.delayDocWrite||!this.config.usesDocumentWrite)};a.prototype.injectionLocationReady=function(){return this.docWriteAsksToWaitForBody()&&!b.bodyReady()?!1:this.config.dontWaitForBody||!this.isLoadingAsynchronously()?
!0:!!e.getHTMLLocationForTag(this)};a.prototype._loadingOutOfTimeFrames=function(){return 0>this.getTimeout()?!1:(new Date).valueOf()-this.loadStarted>this.getTimeout()};a.prototype.loadDependencies=function(){this._loadDependencies()};a.prototype._loadDependencies=function(a){a=a||[];var c=this.dependencies;if(-1===b.indexInArray(a,this)){a[a.length]=this;for(var f=0;f<c.length;f++)c[f].load(a)}};a.prototype.onError=r;a.prototype._onError=function(a){try{this.onError(a)}catch(b){}};a.prototype._triggerOnLoadTimeout=
function(){this.onLoadTimeout()};a.prototype.onLoadTimeout=r;a.prototype.onScriptsLoadSuccess=r;a.prototype.onScriptLoadError=r;a.prototype.onDependenciesLoaded=r;a.prototype.onBeforeLoad=r;a.prototype.load=function(a){if(!this.loadStarted){this.loadStarted=(new Date).valueOf();try{this.onBeforeLoad()}catch(b){this._onError(b)}this.addState("LOADING_DEPENDENCIES");try{!a&&this.config.loadDependenciesOnLoad&&this.loadDependencies()}catch(f){throw f;}d.call(this)}};a.prototype._singleUrlLoadHandler=
function(a,b,f){++this.urlsLoaded;a||++this.urlsFailed;if(this.urlsLoaded===b.length)if(this.loadURLsNotFinished=!1,a&&0===this.urlsFailed){this.addState("LOADED_URL");this.urlsLoaded=(new Date).valueOf();try{f&&f(!0)}catch(c){this._onError(c)}finally{this.onScriptsLoadSuccess()}}else{a="error loading urls. Failed "+this.urlsFailed;this._onError(a);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-(new Date).valueOf();try{this.scriptLoadingFailed=!0,f&&f(!1)}catch(d){this._onError(d)}finally{this.onScriptLoadError(a)}}};
a.prototype.loadURLs=function(a,b){var f=a||this.config.url;this.addState("LOADING_URL");try{!f||f instanceof Array||(f=[f]);for(var c=0;c<f.length;c++){this.loadURLsNotFinished=!0;var d=f[c],d=this.prepareURL(d);this.loadURL(d,function(a){this._singleUrlLoadHandler(a,f,b)}.bind(this))}}catch(m){this.loadURLsNotFinished=!1,this.addState("UNEXPECTED_FAIL"),this.unexpectedFail=(new Date).valueOf(),this._onError(m)}};a.prototype.prepareLocationObject=function(a){return a};a.prototype.prepareURL=function(a){return a};
a.prototype.prepareHTML=function(a){return a};a.prototype.loadURL=function(a,b){this.addState("LOADING_URL");e.loadScript({onsuccess:function(){try{b&&b(!0)}catch(a){}}.bind(this),onerror:function(){try{b&&b(!1)}catch(a){}}.bind(this),url:a,node:this.config.urlLocation||document.body,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};a.prototype.reset=function(){this._securedWrites=this.delayDocWrite=this.scriptLoadingFailed=this.scriptExecuted=this.runIsFinished=this.loadingTimedOut=
this.loadingDependenciesFailed=this.loadedDependencies=this.loadURLsNotFinished=this.loadStarted=this.injectHTMLFailed=this.filtersRunTriggered=this.beforeRun=this.afterRun=this._urlLoadTriggered=this._runOnceTriggered=this._lockedDocWriteInformed=this._loadExecutionURLsAndHTMLInformed=this._injectHTMLTriggered=void 0;this.state=0;this.unexpectedFail=void 0;this.urlsLoaded=this.urlsFailed=0;this._beforeEntered=this.cancelled=this._lastRun=this.isRunning=this.waitForDependenciesFinished=void 0;this.addState("INITIAL")};
a.prototype.isLoadingAsynchronously=function(){return this._wasTimed?!0:!(!this.config.async&&!this.forceAsynchronous)};a.prototype.willSecureDocumentWrite=function(){return this.config.usesDocumentWrite&&this.isLoadingAsynchronously()};a.prototype.injectHTML=function(a){var b=!this.docWriteAsksToWaitForBody(),f=this.prepareHTML(this.config.html);f&&g.injectHTMLForLoader(this,a,b,f)};a.prototype.clone=function(){return new a(this.config)}})();(function(){function a(f){b.setIfUnset(f,{filterTimeout:f&&
f.filterTimeout||this.FILTER_WAIT_TIMEOUT,PACKAGE:f&&f.PACKAGE,dedupe:!1,needsConsent:!1,inactive:!1,variables:null,runner:null});a.superclass.apply(this,arguments);this.namedVariables={};this.parameters=[];this.filters=[];this.session=null;if(f){this.addState("INITIAL");try{a.register(this)}catch(c){}if(f.filters)for(var d=0;d<f.filters.length;d++)this.addFilter(f.filters[d]);f.parameters&&(this.parameters=this.parameters.concat(f.parameters));if(f.variables)for(var m in f.variables)if(f.variables.hasOwnProperty(m)&&
(d=this.getParameterByTokenName(m))){var e=f.variables[m];d.variable=e;void 0!==e.defaultValue&&(d.defaultValue=e.defaultValue);void 0!==e.uv&&(d.uv=e.uv)}this.initPageVariablesForParameters();this.onTagInit()}}function d(a,b){var c=g.initPageVariable(a.namedVariables[b]);return a.namedVariables[b]=c}var b=qubit.opentag.Utils,e=qubit.opentag.TagsUtils,c=qubit.opentag.filter.BaseFilter,g=qubit.opentag.TagHelper;b.clazz("qubit.opentag.BaseTag",a,qubit.opentag.GenericLoader);a.prototype.valueForToken=
function(a,b){var c=this.getParameterByTokenName(a);if(c)return void 0===b&&this.loadingTimedOut&&(b=!0),this.getParameterValue(c,b);if(this.namedVariables&&this.namedVariables[a]&&(c=d(this,a)))return c.getRelativeValue(b)};a.prototype.LOADING_TIMEOUT=5E3;a.prototype.FILTER_WAIT_TIMEOUT=-1;a.prototype.run=function(a){if(this.config&&this.config.runner){a=!1;try{this.addState("AWAITING_CALLBACK"),a=this._runner=(new Date).valueOf(),this.config.runner.call(this)}catch(b){}return a}this._runner=!1;
return this.start(a)};a.prototype.start=function(b){return a.superclass.prototype.run.call(this,b)};a.prototype.startOnce=function(b){return a.superclass.prototype.runOnce.call(this,b)};a.prototype.getFilters=function(){return this.filters};a.prototype.runOnceIfFiltersPass=function(){this._runOnceIfFiltersPassTriggered||this.scriptExecuted||(this._runOnceIfFiltersPassTriggered=(new Date).valueOf(),this.runIfFiltersPass())};a.prototype.runIfFiltersPass=function(){var a=this.filtersState();this.addState("FILTER_ACTIVE");
this.filtersRunTriggered||(this.filtersRunTriggered=(new Date).valueOf());if(a===c.state.SESSION)this.addState("AWAITING_CALLBACK"),this.awaitingCallback=(new Date).valueOf();else if(a===c.state.PASS){this.filtersPassed=(new Date).valueOf();try{this.onFiltersPassed()}catch(b){}this.run()}else if(a===c.state.FAIL)this._markFiltersFailed(),this._markFinished();else if(0<a){var d=this.config.filterTimeout;if(0>d||(new Date).valueOf()-this.filtersRunTriggered>d){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=
(new Date).valueOf();try{this.onFiltersDelayed()}catch(m){}}this._setTimeout(this.runIfFiltersPass.bind(this),a)}else this._markFiltersFailed(),this._markFinished(),this.filtersRunTimedOut=(new Date).valueOf()}try{this.onFiltersCheck(a)}catch(e){}return a};a.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=-(new Date).valueOf()};a.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,CANCELLED:16,LOADING_DEPENDENCIES:32,
LOADED_DEPENDENCIES:64,LOADING_URL:128,LOADED_URL:256,EXECUTED:512,EXECUTED_WITH_ERRORS:1024,FAILED_TO_LOAD_DEPENDENCIES:2048,FAILED_TO_LOAD_URL:4096,FAILED_TO_EXECUTE:8192,TIMED_OUT:16384,UNEXPECTED_FAIL:32768};a.prototype.addState=function(b){a.superclass.prototype.addState.call(this,b);try{a.onStateChange(this)}catch(c){}this.stateStack=[];b=this.STATE;var d=this.state,m=this.stateStack;d&b.INITIAL&&m.push("Initial state.");d&b.FILTER_ACTIVE&&m.push("Tag running with filters pass triggered.");
d&b.FILTERS_FAILED&&m.push("Filters failed to pass.");d&b.AWAITING_CALLBACK&&m.push("Awaiting callback to run this tag. Not pooling.");d&b.STARTED&&m.push("Tag is initialized and loading has been started.");d&b.LOADING_DEPENDENCIES&&m.push("Dependencies are being loaded.");d&b.LOADED_DEPENDENCIES&&m.push("Dependencies loading process has been finished.");d&b.LOADING_URL&&m.push("External URL is being loaded.");d&b.LOADED_URL&&m.push("External URL has been loaded.");d&b.EXECUTED&&m.push("Main script has been executed.");
d&b.EXECUTED_WITH_ERRORS&&m.push("Main script has been executed but errors occured.");d&b.FAILED_TO_LOAD_DEPENDENCIES&&m.push("Dependencies has failed to load.");d&b.FAILED_TO_LOAD_URL&&m.push("URL location failed to load.");d&b.FAILED_TO_EXECUTE&&m.push("Script failed to execute.");d&b.TIMED_OUT&&m.push("Script timed out awaiting for dependencies.");d&b.UNEXPECTED_FAIL&&m.push("Script occured UNEXPECTED exception and is failed.");d&b.CANCELLED&&m.push("Tag has been cancelled.")};a.prototype.onTagInit=
r;a.onStateChange=r;a.prototype.onFiltersDelayed=r;a.prototype.onFiltersPassed=r;a.prototype.onFiltersCheck=r;a.prototype.state=a.prototype.STATE.INITIAL;a.prototype.arePageVariablesLoaded=function(a){return g.allParameterVariablesReadyForTag(this,a)};a.prototype.getDependenciesToBeLoaded=function(b,c){var d=c||[];this.arePageVariablesLoaded(b)||d.push("page variables");return a.superclass.prototype.getDependenciesToBeLoaded.call(this,b,d)};a.prototype.prepareURL=function(a){return this.replaceTokensWithValues(a)};
a.prototype.prepareLocationObject=function(a){return this.replaceTokensWithValues(a)};a.prototype.prepareHTML=function(a){a&&(a=this.replaceTokensWithValues(a));return a};a.prototype.replaceTokensWithValues=function(a){if(!a||-1===a.indexOf("${"))return a;var b=this.parameters;if(b)for(var c=0;c<b.length;c++){var m=this.getVariableForParameter(b[c]);if(m){var d=b[c].token,e=this.valueForToken(d);a=m.replaceToken(d,a,e)}}return a};a.prototype.getParameter=function(a){var b=this.parameters,c=null;if(b)for(var m=
0;m<b.length;m++)b[m].name===a&&(c=b[m]);return c};a.prototype.setParameterValueByTokenName=function(a,b){var c=this.getParameterByTokenName(a);return null!==c?(c.variable={value:b},!0):!1};a.prototype.getParameterValue=function(a,c){var d="string"===typeof a?this.getParameter(a):a;if(d){var m=this.getVariableForParameter(d);if(m)try{var e;c&&(e=b.gevalAndReturn(d.defaultValue).result);return e=m.getRelativeValue(c,e)}catch(g){}}};a.prototype.filtersState=function(){return e.filtersState(this.filters,
this.session,this)};a.prototype.addFilter=function(a){this.session&&a.setSession(this.session);this.filters.push(a)};a.prototype.reset=function(){a.superclass.prototype.reset.call(this);this.resetFilters();this._runner=this.filtersRunTriggered=this._runOnceIfFiltersPassTriggered=this.pingSent=this.dedupePingSent=this.filtersPassed=void 0};a.prototype.resetFilters=function(){for(var a=0;a<this.filters.length;a++)this.filters[a].reset()};a.prototype.getParameterByTokenName=function(a){var b=null;if(this.parameters)for(var c=
this.parameters,m=0;m<c.length;m++)c[m].token===a&&(b=c[m]);return b};a.prototype.removeFilter=function(a){b.removeFromArray(this.filters,a)};var k=0,h=[],n={};a.register=function(a){var c=b.addToArrayIfNotExist(h,a);a._tagIndex=-1===c?h.length-1:c};a.prototype.unregister=function(b){a.unregister(b||this)};a.unregister=function(a){b.removeFromArray(h,a);a._tagIndex=-1};a.getTags=function(){return h};a.getAccessorsMap=function(){return n};a.prototype.getTags=function(){return h};a.prototype.initPageVariablesForParameters=
function(){var a=this.parameters;if(a)for(var b=0;b<a.length;b++)a[b].variable=g.validateAndGetVariableForParameter(a[b]);if(this.namedVariables)for(var c in this.namedVariables)this.namedVariables.hasOwnProperty(c)&&(this.namedVariables[c]=g.initPageVariable(this.namedVariables[c]))};a.prototype.getPageVariables=function(){var a=this.parameters,c=[];if(a)for(var e=0;e<a.length;e++){var m=this.getVariableForParameter(a[e]);null!==m&&b.addToArrayIfNotExist(c,m)}if(this.namedVariables)for(var g in this.namedVariables)b.addToArrayIfNotExist(c,
d(this,g));return c};a.prototype.getAccessorString=function(){this._accessorsMapKey||(this._accessorsMapKey="_"+k++,n[this._accessorsMapKey]=this);return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};a.prototype.getVariableForParameter=function(a){var b=g.validateAndGetVariableForParameter(a);(!b||b.config.empty)&&this.namedVariables&&this.namedVariables[a.token]&&(b=d(this,a.token));return b};a.prototype.checkVariablesState=function(){for(var a=[],b=g.getAllVariablesWithParameters(this),
c=0;c<b.length;c++){var m=b[c].parameter,d=b[c].variable,e;e=m&&m.token?this.valueForToken(m.token):d.getRelativeValue(!0);m={name:d.config.name,exists:d.exists(),token:m?m.token:null,value:e,variable:d};a.push(m)}return a};a.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()}})();(function(){var a=function(){};qubit.opentag.Utils.clazz("qubit.opentag.Tags",a);a.getAllTagsByState=function(){return qubit.opentag.Container.getAllTagsByState(a.getTags())};a.findTagByName=function(a){for(var b=
this.getTags(),e=[],c=0;c<b.length;c++)b[c].config.name===a&&e.push(b[c]);return e};a.findTagByMatch=function(a){for(var b=this.getTags(),e=[],c=0;c<b.length;c++)b[c].config.name.match(a)&&e.push(b[c]);return e};a.getTags=function(){return qubit.opentag.BaseTag.getTags()};a.resetAllTags=function(){for(var d=a.getTags(),b=0;b<d.length;b++)d[b].reset()};a.getContainersPageVariables=function(){for(var d=a.getContainers(),b=[],e=0;e<d.length;e++)b=b.concat(d.getPageVariables());return b};a.getAllPageVariables=
function(){for(var d=a.getTags(),b=[],e=0;e<d.length;e++)b=b.concat(d[e].getPageVariables());return b};a.cancelAll=function(){for(var d=a.getTags(),b=0;b<d.length;b++)d[b].cancel()};a.resetAll=function(){for(var d=a.getTags(),b=0;b<d.length;b++)d[b].reset()};a.getPageVariableByName=function(d){for(var b=a.getAllPageVariables(),e=[],c=0;c<b.length;c++)b[c].config.name===d&&e.push(b[c]);return e};a.getLoadTime=function(a){var b=a.beforeRun,e=a.runIsFinished;return isNaN(e)?{tag:a,loadTime:null}:{tag:a,
loadTime:e-b}};a.getLoadTimes=function(d){var b=[];if(d instanceof qubit.opentag.BaseTag)return b.push([a.getLoadTime(d[e])]),b;d=d||a.getTags();if(d instanceof Array)for(e=0;e<d.length;e++)d[e]instanceof qubit.opentag.BaseTag&&b.push(a.getLoadTime(d[e]));else for(var e in d)d[e]instanceof qubit.opentag.BaseTag&&b.push(a.getLoadTime(d[e]));return b};a.getContainers=function(){return qubit.opentag.Container.getContainers()}})();A={};w=void 0;A.update=function(){var a,d;d=function(){return Math.floor(1+
65536*Math.random()).toString(36).substring(1)};window.__pageViewId__||(a=(new Date).getTime().toString(36),window.__pageViewId__=a+d()+d()+d());return window.__pageViewId__};p.PostData=function(a,d,b){var e,c,g,k,h,n,f;f=2;h=!1;n=function(){0<f&&setTimeout(function(){h||(f-=1,e())},5E3)};c=navigator.userAgent.toLowerCase();g=-1!==c.indexOf("msie");c.indexOf("msie 9");c=-1!==c.indexOf("msie 7")||-1!==c.indexOf("msie 6");k=("https:"===document.location.protocol?"https:":"http:")+a;b=b||"POST";e=function(){var a;
try{a=null;try{a=new XMLHttpRequest}catch(c){}a&&!g?a.open(b,k,!0):"undefined"!==typeof XDomainRequest?(a=new XDomainRequest,a.open(b,k)):a=null;try{a.withCredentials=!1}catch(m){}a.setRequestHeader&&a.setRequestHeader("Content-Type","text/plain;charset=UTF-8");a.onload=function(){h=!0};a.onreadystatechange=function(){};a.ontimeout=function(){};a.onerror=function(){};a.onprogress=function(){};a.send(d)}catch(e){try{try{p.fileLoader.load(k)}catch(f){window.console&&window.console.log&&window.console.log(e)}}catch(y){}}n()};
c?p.fileLoader.load(k):e()};(function(){function a(){}qubit.opentag.Utils.clazz("qubit.opentag.Ping",a);a.prototype.send=function(a,b){for(var e="c="+a.clientId+"&p="+a.containerId+"&l="+a.tellLoadTimesProbability+"&pv="+A.update()+"&d=",c=[],g=0;g<b.length;g++){var k=b[g].tag,h=b[g].loadTime,n=k.config.ID;!k.pingSent&&n&&null!==h&&void 0!==n&&(c.push('"'+n+'":'+h),k.pingSent=!0)}a.pingServerUrl&&0<c.length&&(e+=encodeURIComponent("{"+c.join(",")+"}"),p.PostData("//"+a.pingServerUrl+"/tag2?"+e,null,
"GET"))};a.prototype.sendErrors=function(a,b){};a.prototype.sendDedupe=function(a,b){for(var e="c="+a.clientId+"&p="+a.containerId+"&l="+a.tellLoadTimesProbability+"&pv="+A.update()+"&dd=",c=[],g=0;g<b.length;g++){var k=b[g],h=k.config.ID;void 0===h||k.dedupePingSent||(c.push(h),k.dedupePingSent=!0)}0<c.length&&a.pingServerUrl&&(e+=encodeURIComponent("["+c.join(",")+"]"),p.PostData("//"+a.pingServerUrl+"/tag2?"+e,null,"GET"))}})();w={_cookieName:"_qst_s",_sessionCookie:"_qsst_s",update:function(a){var d,
b;d=qubit.Cookie.get(w._cookieName,!0);b=qubit.Cookie.get(w._sessionCookie,!0);if(d){if(d=parseInt(d,10),!b||parseInt(b,10)<(new Date).getTime()-18E5)d+=1}else d=1;qubit.Cookie.set(w._cookieName,d,365,a,!0);qubit.Cookie.set(w._sessionCookie,(new Date).getTime().toString(),null,a,!0);return d}};var z={};(function(){function a(a){return 10>a?"0"+a:a}function d(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+a+'"'}function b(c,e){var h,m,s,F,y=g,x,t=e[c];if(t instanceof Date)h=t,t=isFinite(h.valueOf())?h.getUTCFullYear()+"-"+a(h.getUTCMonth()+1)+"-"+a(h.getUTCDate())+"T"+a(h.getUTCHours())+":"+a(h.getUTCMinutes())+":"+a(h.getUTCSeconds())+"Z":null;else if(t instanceof String||t instanceof Number||t instanceof Boolean)t=t.valueOf();"function"===typeof n&&(t=n.call(e,c,t));switch(typeof t){case "string":return d(t);case "number":return isFinite(t)?String(t):"null";case "boolean":case "null":return String(t);
case "object":if(!t)return"null";g+=k;x=[];if("[object Array]"===Object.prototype.toString.apply(t)){F=t.length;for(h=0;h<F;h+=1)x[h]=b(h,t)||"null";s=0===x.length?"[]":g?"[\n"+g+x.join(",\n"+g)+"\n"+y+"]":"["+x.join(",")+"]";g=y;return s}if(n&&"object"===typeof n)for(F=n.length,h=0;h<F;h+=1)"string"===typeof n[h]&&(m=n[h],(s=b(m,t))&&x.push(d(m)+(g?": ":":")+s));else for(m in t)Object.prototype.hasOwnProperty.call(t,m)&&(s=b(m,t))&&x.push(d(m)+(g?": ":":")+s);s=0===x.length?"{}":g?"{\n"+g+x.join(",\n"+
g)+"\n"+y+"}":"{"+x.join(",")+"}";g=y;return s}}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,k,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof z.stringify&&(z.stringify=function(a,c,d){var m;k=g="";if("number"===typeof d)for(m=0;m<d;m+=1)k+=" ";else"string"===
typeof d&&(k=d);if((n=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});"function"!==typeof z.parse&&(z.parse=function(a,b){function c(a,m){var d,e,g=a[m];if(g&&"object"===typeof g)for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(e=c(g,d),void 0!==e?g[d]=e:delete g[d]);return b.call(a,m,g)}var m;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));
if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return m=eval("("+a+")"),"function"===typeof b?c({"":m},""):m;throw new SyntaxError("JSON.parse");})})();(function(){function a(a){for(var b=[],c=0;c<a.length;c++)b.push([new RegExp(a[c][0],"g"),"\\"+a[c][1]]);return b}function d(a,b){for(var c=0;c<b.length;c++)if(b[c][1]===a)return b[c][0];return null}function b(b){this._regexDefs=
h;this._defs=k;b&&b.definitions&&(this._regexDefs=a(b.definitions),this._defs=b.definitions)}function e(a){for(var b={},c="",d=0;d<a.length;d++){var e=a.charAt(d);switch(e){case "=":case "&":case "?":case "/":case ",":case ":":isNaN(b[c])&&(b[c]=a.split(c).length-1);c="";break;default:c+=e}}a=[];for(var g in b)b.hasOwnProperty(g)&&(c=b[g],c>=f&&g.length>=n&&a.push([g,c]));return a=a.sort(function(a,b){return a[0].length===b[0].length?0:b[0].length>a[0].length?1:-1})}var c=qubit.Define,g=qubit.Cookie,
k=[["www.google.co","G"],['"landing":',"L"],['"time":',"A"],['"url":',"U"],['"sessionStartTime":',"S"],['"pageViews":',"P"],['"sessionCount":',"B"],['"sessionLandingPage":',"E"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],["http%3A%2F%2Fwww","F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],[".co.uk/","Q"],[".co.uk","O"]],h=a(k);c.clazz("qubit.opentag.compression.Encoder",b);b.prototype.encode=
function(a,b){for(var c=a.replace(/\\/g,"\\\\"),d=e(c),f=0;f<this._regexDefs.length;f++)var h=this._regexDefs[f],c=c.replace(h[0],h[1]);for(var c=c.replace(/;/g,"\\*"),c=c.replace(/=/g,"\\+"),c=c.replace(/\n/g,"\\N"),c=c.replace(/ /g,"\\_"),c=c.replace(/\t/g,"\\T"),c=c.replace(/,/g,"\\C"),h=[],k=f=0;f<d.length;f++){var n=new RegExp(d[f][0].replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),n=c.replace(n,"\\"+k+"-");n!==c&&(h.push(d[f][0]),k++,c=n)}if(!b){d=[];for(f=0;f<c.length;f++)g.cookieAlphabetMap.hasOwnProperty(c.charAt(f))?
d.push(c.charAt(f)):d.push("\\"+c.charCodeAt(f)+".");c=d.join("")}return 0<h.length?"Y"+h.join("&")+"?"+c:"N"+c};var n=4,f=2;b.prototype.decode=function(a){var b=null;if("N"===a.charAt(0))a=a.substring(1);else if("Y"===a.charAt(0)){var c=a.indexOf("?");0<=c&&(b=a.substring(1,c),b=b.split("&"),a=a.substring(c+1))}for(var c="",e=!1,g=!1,f="",h=0;h<a.length;h++){var k=a.charAt(h);"\\"===k||e||g?e||g?(e=!1,"\\"===k?c+="\\":"*"===k?c+=";":"+"===k?c+="=":"N"===k?c+="\n":"_"===k?c+=" ":"T"===k?c+="\t":"C"===
k?c+=",":null!==d(k,this._defs)?(k=d(k,this._defs),c+=k):isNaN(+("-"+k))?g?(c="."===k?c+String.fromCharCode(+f):b&&"-"===k?c+b[+f]:c+("\\"+f+k),f="",g=!1):c+="\\"+k:(g=!0,f+=k)):e=!0:c+=k}f&&(c+="\\"+f);e&&(c+="\\");return c}})();(function(){function a(a){this.testBinary=!0;this.binSupported=c;a&&(this.compressor=new qubit.compression.Compressor,this.encoder=new qubit.opentag.compression.Encoder({}))}var d=qubit.Define,b=qubit.Cookie,e=d.global(),c=!!e.chrome||void 0!==e.mozIndexedDB;d.clazz("qubit.opentag.compression.CookieCompressor",
a);a.prototype.compress=function(a,c){if("string"!==typeof a||""===a)return a;var d,e=this.encoder.encode(a);if(this.binSupported)return d=this.compressor.compress(e),d=this.encoder.encode(d,!0),"B"+d;if(this.testBinary){d=this.compressor.compress(e);d=this.encoder.encode(d,!0);b.set("__qtag_test_bin__",d);var f=b.get("__qtag_test_bin__");b.rm("__qtag_test_bin__");if(f===d)return"B"+d}d=this.compressor.compressAnsi(e);return d=!c&&e.length<=d.length?"E"+e:"C"+d};a.prototype.decompress=function(a){if("string"!==
typeof a||""===a)return a;var b=a.charAt(0);a=a.substring(1);switch(b){case "E":return this.encoder.decode(a);case "C":return a=this.compressor.decompressAnsi(a),this.encoder.decode(a);case "B":return a=this.compressor.decompress(this.encoder.decode(a)),this.encoder.decode(a);default:throw"This code is not supported! Code: "+b;}}})();(function(){var a=qubit.Cookie,d=qubit.opentag.Utils,b=function(){};d.clazz("qubit.opentag.Session",b);var e=new qubit.opentag.compression.CookieCompressor({});b.readCompressedCookie=
function(b){b=a.get(b);return e.decompress(b)};b.setupSession=function(c){var g,k,h,n,f;g={};g.sessionCount=w.update(c.cookieDomain);f="qtag_"+c.containerId;var p="x_qtag_"+c.containerId;h=a.get(f,!0);var q=!!h;null===h&&(h=a.get(p),h=e.decompress(h));if(h)try{h=z.parse(h)}catch(m){h={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}else h={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}};k=(new Date).getTime();
g.sessionCount!==parseInt(h.sc,10)?(h.sessionStartTime=k,h.sc=g.sessionCount,h.sessionCount+=1,h.referrer.push({url:b.getReferrer(),landing:d.getUrl().substring(0,300),time:k}),h.sessionLandingPage=d.getUrl().substring(0,300)):b.isReferrerDifferent()&&!b.referrerIsSameAsPrevious(h.referrer,k,18E5)&&(h.referrer.push({url:b.getReferrer(),landing:d.getUrl().substring(0,300),time:k}),h.sessionLandingPage=d.getUrl().substring(0,300),h.sessionStartTime=k,h.sessionCount+=1);g.sessionCount=h.sessionCount;
g.sessionStartTime=h.sessionStartTime;g.pageStartTime=k;h.pageViews+=1;g.pageViews=h.pageViews;g.sessionLandingPage=h.sessionLandingPage;g.referrer=h.referrer;5<g.referrer.length&&g.referrer.splice(2,g.referrer.length-5);n=z.stringify(h);for(k=0;e.compress(n).length>c.maxCookieLength&&5>k;)3<=h.referrer.length?h.referrer.splice(2,1):2===h.referrer.length?h.referrer=[h.referrer[0]]:1===h.referrer.length&&(h.referrer=[]),n=z.stringify(h),k+=1;g.referrer=h.referrer;q&&a.rm(f);f=e.compress(n);a.rm(p);
a.set(p,f,365,c.cookieDomain);g.setVariable=function(b,d,m){h.__v[b]=[d,m?m:0];b=e.compress(z.stringify(h));a.set(p,b,365,c.cookieDomain)};g.getCookie=function(b,c){var d=a.get(b);if(d&&(c||0===b.indexOf("x_")))try{d=e.decompress(d)}catch(m){}else d=a.decode(d);return d};g.getVariable=function(a){var b;if(a=h.__v[a])if(b=a[1],0===b||b>(new Date).getTime())return a[0];return null};g.on=function(a,b,c){b.attachEvent?b.attachEvent("on"+a,c):b.addEventListener&&b.addEventListener(a,c,!1)};return g};b.referrerIsSameAsPrevious=
function(a,e,k){var h,n;return 0<a.length?(h=b.getReferrer(),n=d.getUrl().substring(0,300),a=a[a.length-1],a.url===h&&a.landing===n&&a.time+k>e):!1};b.isReferrerDifferent=function(){var a,d;d=b.getReferrer();a=d.indexOf("://");if(-1===a)return!0;try{return 0!==d.substring(a+3).indexOf(b.getDomain())?!0:!1}catch(e){return!0}};b.getReferrer=function(){return document.referrer?document.referrer.substring(0,300):"direct"};b.getDomain=function(){return document.location.host}})();(function(){function a(b){this.runQueue=
[];this.tags={};this.config={cookieDomain:"",maxCookieLength:1E3,gzip:!0,delayDocWrite:!1,clientId:"",name:"",tellLoadTimesProbability:0,pingServerUrl:null,trackSession:!1,containerId:""};this.ignoreTagsState=!1;b&&(this.setConfig(b),this.isTellingLoadTimes=this.config.tellLoadTimesProbability>Math.random(),b.name||(this.config.name="Cont-"+f++),a.register(this),this.ping=new qubit.opentag.Ping(this.config),this.config.trackSession&&(this.session=h.setupSession(this.config)));return this}function d(a,
b,c){a[c]&&(q[c]=q[c]||1,c+="("+q[c]+")",q[c]++);a[c]=b}var b=qubit.opentag.Utils,e=qubit.opentag.filter.BaseFilter,c=qubit.opentag.BaseTag,g=qubit.opentag.Timed,k=qubit.opentag.Tags,h=qubit.opentag.Session,n=qubit.Cookie,f=1;window.opentag_consentGiven=function(){a.consentIsGiven=!0;for(var b=a.getContainers(),c=0;c<b.length;c++)try{b[c].run()}catch(d){}}.bind(this);b.clazz("qubit.opentag.Container",a);var p=[];a.register=function(a){b.addToArrayIfNotExist(p,a)};a.prototype.unregister=function(){a.unregister(this)};
a.unregister=function(a){b.addToArrayIfNotExist(p,a);b.removeFromArray(p,a)};a.prototype.hasConsent=function(){return"Accepted"===n.get("qubitconsent",!0)};a.prototype.register=function(b){a.register(b||this)};a.getContainers=function(){return p};a.prototype.getContainers=function(){return a.getContainers()};a.prototype.onTagRegistered=function(a){};a.prototype.registerTag=function(a){var b=a.config.name;if(!this.tags[b]){this.tags[b]=a;try{this.onTagRegistered(a)}catch(c){}}};a.prototype.registerTags=
function(a){for(var b=0;b<a.length;b++)this.registerTag(a[b])};a.prototype.setConfig=function(a){for(var b in a)this.config[b]=a[b]};a.prototype.run=function(){this.runTags({command:"runOnceIfFiltersPass"})};a.prototype.runWithoutFilters=function(){this.runTags({command:"run"})};a.prototype.getTagByname=function(a){return this.tags[a]};a.prototype.containerScriptLoadedSynchronously=function(){var a,b,c,d,e;d=document.getElementsByTagName("script");a=0;for(b=d.length;a<b;a+=1)if(c=d[a],(e=c.getAttribute("src"))&&
0<e.indexOf(""+this.config.clientId+"-"+this.config.profileName+".js"))return null===c.getAttribute("async")&&(!1===c.getAttribute("defer")||""===c.getAttribute("defer")||null===c.getAttribute("defer"));return!0};a.prototype.runTags=function(c){if(!a.OFF&&!b.global().QUBIT_CONTAINERS_OFF){var d=this.containerScriptLoadedSynchronously(),e="runIfFiltersPass";c&&c.command&&(e=c.command);this.runningStarted=(new Date).valueOf();c={};for(var f in this.tags)try{var g=this.tags[f];if(this.includedToRun(g)){d||
(g.forceAsynchronous=!0);this.config.delayDocWrite&&(g.delayDocWrite=!0);g.session=g.session||this.session;if(0<g.dependencies.length)for(var h=0;h<g.dependencies.length;h++){var k=g.dependencies[h],n=k.config.name;!c[n]&&this.tags[n]&&(c[n]=k,k[e]())}c[f]||(c[f]=g,g[e]())}}catch(p){}this.waitForAllTagsToFinish()}};a.prototype.includedToRun=function(b){if(b.config.inactive)return!1;var d=a.consentIsGiven||!b.config.needsConsent||this.hasConsent();b=b.state===c.prototype.STATE.INITIAL;return this.ignoreTagsState||
d&&b};a.prototype.waitForAllTagsToFinish=function(){if(!this._waitForAllTagsToFinishWaiting){var a=this.allTagsFinished();if(!this._showFinishedOnce&&a){if(this._showFinishedOnce=!0,this.runningFinished=(new Date).valueOf(),this.sendPingsNotTooOften(),this.onTagsInitiallyRun)this.onTagsInitiallyRun()}else a?(l.INFO("********************************************************"),l.WARN("All tags seem to finished current jobs."),l.INFO("********************************************************")):(this._waitForAllTagsToFinishWaiting=
!0,this._showFinishedOnce=!1,g.setTimeout(function(){this._waitForAllTagsToFinishWaiting=!1;this.waitForAllTagsToFinish()}.bind(this),100))}};a.prototype.onTagsInitiallyRun=r;a.prototype.resetAllTags=function(){for(var a in this.tags)this.tags.hasOwnProperty(a)&&this.tags[a].reset()};a.prototype.reset=function(){this._showFinishedOnce=this.runningStarted=this._waitForAllTagsToFinishWaiting=this.runningFinished=void 0;this.resetAllTags()};a.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||
{};g.runIfNotScheduled(this.sendPings.bind(this),2E3,this._sndLck)};a.prototype.sendPings=function(){if(this.isTellingLoadTimes){var a=this.getAllTagsByState(),b=this,c;a.run&&(c=k.getLoadTimes(a.run),this.lastPingsSentTime=(new Date).valueOf(),this.ping.send(this.config,c));c=k.getLoadTimes();for(var d=[],e=0;e<c.length;e++)(function(a){a=c[a].tag;a.config.dedupe&&a.sendDedupePing&&d.push(a)})(e);0<d.length&&(this.lastDedupePingsSentTime=(new Date).valueOf(),this.ping.sendDedupe(this.config,d));
if(a.other){c=k.getLoadTimes(a.other);for(var f=[],e=0;e<c.length;e++)(function(a){var d=c[a].tag;f.push(c[a]);var e=d.onAfter;d.onAfter=function(a){e.call(d,a);b.sendPingsNotTooOften()}})(e)}if(a.awaiting){c=k.getLoadTimes(a.awaiting);f=[];for(e=0;e<c.length;e++)(function(a){var d=c[a].tag;f.push(c[a]);var e=d.onAfter;d.onAfter=function(a){e.call(d,a);b.sendPingsNotTooOften()}})(e);0<f.length&&this.ping.send(this.config,f)}}};a.prototype.getAllTagsByState=function(){return a.getAllTagsByState(this.tags)};
a.getAllTagsByState=function(a){var b=null,f=null,g=null,h=null,k=null,n=c.prototype.STATE.FILTERS_FAILED,p;for(p in a){var q=a[p];if(q instanceof c){var r=q.config.name;0<q.scriptExecuted?(b=b||{},d(b,q,r)):0>q.scriptExecuted||q.state>n?(h=h||{},d(h,q,r)):q.filtersState()===e.state.SESSION||0<q.filtersState()?(g=g||{},d(g,q,r)):q.config.needsConsent?(k=k||{},d(k,q,r)):(f=f||{},d(f,q,r))}}return{run:b,failed:h,awaiting:g,consent:k,other:f}};var q={};a.prototype.allTagsFinished=function(){for(var a in this.tags)if(this.tags.hasOwnProperty(a)){var b=
this.tags[a];if(b instanceof qubit.opentag.BaseTag){var c=b.filtersState();if(0>b.filtersState()&&!(b.finished()||b.config.runner&&!b.isRunning)&&c!==e.state.SESSION)return!1}}return!0};a.prototype.getPageVariables=function(){var a=[],c;for(c in this.tags)if(this.tags.hasOwnProperty(c))for(var d=this.tags[c].getPageVariables(),e=0;e<d.length;e++)b.addToArrayIfNotExist(a,d[e]);return a};a.getPageVariableByName=function(a){for(var b=this.getAllPageVariables(),c=[],d=0;d<b.length;d++)b[d].config.name===
a&&c.push(b[d]);return c}})();(function(){function a(b){d.setIfUnset(b,a.defaultConfig);if(this.singleton){var e=qubit.opentag.Utils.getObjectUsingPath(this.PACKAGE_NAME+"."+this.CLASS_NAME);if(e.__instance)return e.__instance;e.__instance=this}a.superclass.call(this,b)}var d=qubit.opentag.Utils;d.clazz("qubit.opentag.LibraryTag",a,qubit.opentag.BaseTag);a.defaultConfig={vendor:null,imageUrl:null,description:"Provide description.",async:!1,isPrivate:!1,upgradeable:!0,html:"",parameters:[]};a.prototype.pre=
function(){};a.prototype.post=function(){};a.prototype.before=function(){a.superclass.prototype.before.call(this);if(this.config.html||this.config.script)return!1;try{var b=this.config;if(b&&b.pre)if("function"===typeof b.pre)this.pre=b.pre,this.pre();else{var e=this.replaceTokensWithValues(String(b.pre));this.config.prePostWindowScope?d.geval(e):(this.pre=d.expressionToFunction(e).bind(this),this.pre())}else this.pre()}catch(c){return!0}return!1};a.prototype.after=function(b){a.superclass.prototype.after.call(this,
b);if(!this.config.html&&!this.config.script)try{var e=this.config;if(e&&e.post)if("function"===typeof e.post)this.post=e.post,this.post(b);else{var c=this.replaceTokensWithValues(String(e.post));this.config.prePostWindowScope?d.geval(c):(this.post=d.expressionToFunction(c).bind(this),this.post(b))}else this.post(b)}catch(g){}};a.define=function(b,e){b=b.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");var c=e.config,g=e.CONSTRUCTOR,k={},h;for(h in e)"config"!==h&&(k[h]=e[h]);k.CONSTRUCTOR=
function(a){a=a||{};var b=d.objectCopy(c,{maxDeep:5}),e;for(e in b)a.hasOwnProperty(e)||(a[e]=b[e]);b=qubit.opentag.LibraryTag.call(this,a);g&&g.call(this,a);if(b)return b};k=qubit.opentag.Utils.defineClass(b,a,k);d.namespace("qubit.opentag.libraries."+b,k);return k}})();(function(){function a(b){d.setIfUnset(b,{url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",prePostWindowScope:!0,async:!0});a.superclass.call(this,b)}var d=qubit.opentag.Utils;d.clazz("qubit.opentag.CustomTag",
a,qubit.opentag.LibraryTag)})();qubit.opentag.Utils.namespace("qubit.opentag.filter.pattern.PatternType",{CONTAINS:"Contains",MATCHES_EXACTLY:"Matches Exactly",STARTS_WITH:"Starts with",ENDS_WITH:"Ends with",REGULAR_EXPRESSION:"Regular Expression",ALL_URLS:"All URLs"});(function(){function a(d){this._lockObject={};var c={patternType:b.CONTAINS,pattern:""};if(d)for(var g in d)d.hasOwnProperty(g)&&(c[g]=d[g]);a.superclass.call(this,c)}var d=qubit.opentag.Utils,b=qubit.opentag.filter.pattern.PatternType;
d.clazz("qubit.opentag.filter.URLFilter",a,qubit.opentag.filter.BaseFilter);a.prototype.getURL=function(a){return a||d.getUrl()};a.prototype.match=function(a){a=this.getURL(a);var c=!0,d=this.config.pattern;switch(this.config.patternType){case b.CONTAINS:c=0<=a.toLowerCase().indexOf(d.toLowerCase());break;case b.MATCHES_EXACTLY:c=a.toLowerCase()===this.config.pattern.toLowerCase();break;case b.STARTS_WITH:c=0===a.toLowerCase().indexOf(d.toLowerCase());break;case b.ENDS_WITH:c=a.lastIndexOf(d.toLowerCase())+
d.length===a.length;break;case b.REGULAR_EXPRESSION:c=(new RegExp(d)).test(a);break;case b.ALL_URLS:c=!0}return c}})();(function(){function a(a){this.config={filters:[],profileName:"",qTagClientId:"",pageVars:{},scriptLoaders:{},tellLoadTimesProbability:0,pingServerUrl:"",qtag_domain:"",delayDocWrite:!1,maxCookieLength:3E3,containerName:""};this.config.qtag_track_session=!0;for(var b in a)a.hasOwnProperty(b)&&(this.config[b]=a[b])}function d(a,c){for(var d=[],f=0;f<a.length;f++){var h=a[f];if(-1!==
e.indexInArray(h.scriptLoaderKeys,c)){var m=!1;switch(A(h)){case w:m=!0}h.instance=m||h.starter||"function"===typeof h.pattern?new k({include:1===+h.filterType,name:h.name,customStarter:h.starter,customScript:h.pattern}):new g({include:1===+h.filterType,name:h.name,patternType:b(h),pattern:h.pattern});void 0!==h.priority&&(h.instance.config.order=+h.priority);d.push(h.instance)}}return d.sort(function(a,b){return+a.priority>+b.priority})}function b(a){switch(a.patternType){case M:case L:return null;
case K:case "1"+K:return c.MATCHES_EXACTLY;case I:case "1"+I:return c.CONTAINS;case J:case "1"+J:return c.REGULAR_EXPRESSION;case u:case "1"+u:return c.ALL_URLS;default:return null}}var e=qubit.opentag.Utils,c=qubit.opentag.filter.pattern.PatternType,g=qubit.opentag.filter.URLFilter,k=qubit.opentag.filter.SessionVariableFilter,h=qubit.opentag.LibraryTag,n=qubit.opentag.CustomTag,f=qubit.opentag.pagevariable.DOMText,p=qubit.opentag.pagevariable.BaseVariable,q=qubit.opentag.pagevariable.URLQuery,m=
qubit.opentag.pagevariable.Cookie,r=qubit.opentag.pagevariable.Expression;e.clazz("qubit.opentag.OldTagRunner",a);a.prototype.run=function(){if(!this._run){this._run=(new Date).valueOf();this.container=new qubit.opentag.Container({cookieDomain:this.config.qtag_domain,maxCookieLength:this.config.maxCookieLength,delayDocWrite:this.config.delayDocWrite,gzip:!0,clientId:this.config.qTagClientId,containerId:this.config.profileName,name:this.config.containerName,tellLoadTimesProbability:this.config.tellLoadTimesProbability,
pingServerUrl:this.config.pingServerUrl,trackSession:this.config.qtag_track_session});var a=this.getTags();this.container.registerTags(a);this.container.run()}};a.prototype.getTags=function(){var a=this.config.filters,b=this.config.scriptLoaders,c=this.config.pageVars,e=[],g;for(g in b)if(b.hasOwnProperty(g)){var k=b[g],u=d(a,g),w,A=c;w=k.pageVars;var E=[],G=void 0;for(G in w)if(w.hasOwnProperty(G)){var D=w[G],B=A[G];if(B){var C={name:B.name,value:B.value};switch(B.type){case z:B=new r(C);break;case y:B=
new q(C);break;case x:B=new m(C);break;case t:B=new f(C);break;default:B=new p(C)}C={token:D.token};D.defaultValue&&(C.defaultValue=D.defaultValue);B&&(C.variable=B);E.push(C)}}w=E;E="";1===k.locationId?E="HEAD":2===k.locationId?E="BODY":3===k.locationId&&(E=k.locationDetail);A=k.dedupe;u={name:k.name,filters:u,parameters:w,ID:k.id,url:k.url,html:k.html,template:!!k.template,locationPlaceHolder:1===+k.positionId?"NOT_END":"END",locationObject:E,async:k.async,needsConsent:k.needsConsent,usesDocumentWrite:k.usesDocWrite,
genericDependencies:k.genericDependencies};void 0!==k.prePostWindowScope&&(u.prePostWindowScope=k.prePostWindowScope);A&&(u.dedupe=!0);k.runner&&(u.runner=k.runner);k.pre&&(u.pre=k.pre);k.post&&(u.post=k.post);k.script&&(u.script=k.script);k=null;k=u.template?new h(u):new n(u);b[g].instance=k;e.push(k)}for(g in b)if(b.hasOwnProperty(g)&&(a=[],k=b[g],k.dependencies)){for(c=0;c<k.dependencies.length;c++)a.push(b[k.dependencies[c]].instance);k=k.instance;k.dependencies=a.concat(k.dependencies)}return e};
var z="2",y="3",x="4",t="5",w="3",A=function(a){a=parseInt(a.patternType,10);if(10>a||100===a)return"1";if(10<=a&&20>a)return"2";if(110===a)return w},u="1",I="2",J="3",K="4",M="100",L="110"})();qubit.opentag.Utils.namespace("qubit.opentag.data.category.ABMultiVariateTesting",{id:4,name:"AB & Multi-Variate Testing"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.AdvertisingNetwork",{id:10,name:"Advertising Network"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.AffiliateNetworks",
{id:5,name:"Affiliate Networks"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.AudienceManagement",{id:9,name:"Audience Management"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.DSP",{id:13,name:"DSP"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.DSPAdServer",{id:14,name:"DSP (Ad Server)"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.DigitalMediaAgencies",{id:12,name:"Digital Media Agencies"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.EmailServiceProviderESP",
{id:15,name:"Email Service Provider (ESP)"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.FeedManagementShoppingComparison",{id:16,name:"Feed Management (Shopping Comparison)"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.LiveChatCustomerServiceEngine",{id:17,name:"Live Chat & Customer Service Engine"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.MerchandisingRichMedia",{id:18,name:"Merchandising & Rich Media"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.PersonalisationPlatform",
{id:19,name:"Personalisation Platform"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.RatingsReviewEngine",{id:6,name:"Ratings & Review Engine"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.ReTargeting",{id:8,name:"Re-Targeting"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.SearchEngine",{id:7,name:"Search Engine"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.Social",{id:3,name:"Social"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.TagManagement",
{id:11,name:"Tag Management"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.WebAnalytics",{id:2,name:"Web Analytics"});qubit.opentag.Utils.namespace("qubit.opentag.data.category.ABMultiVariateTesting",{id:1,name:"Web Utilities / JavaScript Tools"})})()}catch(e$$23){try{window.debug&&console.log(e$$23)}catch(ex$$36){}};
